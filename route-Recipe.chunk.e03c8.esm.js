(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"++6B":function(e){e.exports={container:"container__1bdtp",title:"title__3q31p","title-row":"title-row__395Ks",sep:"sep__zj3cc",hint:"hint__2xB8n",breadcrumb:"breadcrumb__2SMJD",preset:"preset__1iX0X"}},Mauj:function(e,t,r){function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}var a={"./TUNA.yaml":"Ta76"};n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="Mauj"},Ta76:function(e){e.exports=JSON.parse('{"homepage":"https://mirrors.tuna.tsinghua.edu.cn","fullname":"Tsinghua University Open Source Mirrors","shared":{"SITE_BASE":"https://mirrors.tuna.tsinghua.edu.cn"},"presets":{"ubuntu":{"BASE":"{SITE_BASE}/ubuntu"},"AUR":{"URL":"https://aur.mirrors.tuna.tsinghua.edu.cn/"},"archlinux":{"BASE":"{SITE_BASE}/archlinux"}}}')},bbHE:function(e){e.exports=JSON.parse('{"params":{"DIST":{"possible-value":["archlinux"]},"URL":{"description":"The URL of the mirror"},"TOOL":{"description":"The tool you use","possible-value":["yay","yaourt"]}},"procedures":[{"when":{"DIST":"archlinux","TOOL":"yay"},"steps":[{"run":"yay --aururl \\"{URL}\\" --save"}]},{"when":{"DIST":"archlinux","TOOL":"yaourt"},"steps":[{"append":"/etc/yaourtrc"},{"with":"AURURL=\\"{URL}\\""}]}]}')},hFeo:function(e){e.exports=JSON.parse('{"params":{"DIST":{"possible-value":["ubuntu"]},"RELEASE":{"description":"The formal release name of the ubuntu version","possible-value":["focal","bionic","xenial"],"obtained-by":"cat /etc/apt/sources.list | awk \'{ print $3 }\' | grep -v - | head -n 1"},"BASE":{"description":"The base of the mirror"}},"steps":{"change-sources-list":{"replace":"/etc/apt/sources.list","with":"deb {BASE} {RELEASE} main restricted universe multiverse\\ndeb {BASE} {RELEASE}-security main restricted universe multiverse\\ndeb {BASE} {RELEASE}-backports main restricted universe multiverse\\ndeb {BASE} {RELEASE}-updates main restricted universe multiverse\\n# Enable if you want to get proposed packages\\n# deb {BASE} {RELEASE}-proposed main restricted universe multiverse\\n\\ndeb-src {BASE} {RELEASE} main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-security main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-backports main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-updates main restricted universe multiverse\\n# Enable if you want to get proposed packages\\n# deb-src {BASE} {RELEASE}-proposed main restricted universe multiverse\\n"}},"procedures":[{"when":{"DIST":"ubuntu"},"steps":[{"do":"change-sources-list"},{"run":"sudo apt update"}]}]}')},jh0i:function(e){e.exports={select:"select__1gF0M"}},n8fc:function(e,t,r){"use strict";var n=r("hosL"),s=r("QRet"),a=r("83Vu"),c=r("y3o+"),i=r("jh0i"),u=r.n(i);t.a=()=>{var e;const{state:t,dispatch:r}=Object(s.a)(a.a);return Object(n.h)("select",{class:u.a.select,value:null!=(e=t.site)?e:"__unset__",onChange:e=>r({type:"SetSite",site:"__unset__"===e.currentTarget.value?null:e.currentTarget.value})},Object(n.h)("option",{value:"__unset__"},"Unset"),Object(n.h)("optgroup",null,Object.keys(c.a).map(e=>Object(n.h)("option",{value:e,key:e},e))))}},wIqj:function(e,t,r){"use strict";function n(e,t){let r=e;const n=/\{ *([A-Z0-9_]+) *\}/g;let s;const a=[];for(;null!==(s=n.exec(r));){var c;const e=s[1];a.push([s.index,n.lastIndex,null!=(c=t[e])?c:`[${e}]`])}a.reverse();for(const[e,t,n]of a)r=r.substr(0,e)+n+r.substr(t);return r}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){const r=e.presets[t];if(!r)return{};return function e(t,r,n,s){if(0===Object.keys(t).length)return{};let a=null!=n?n:new Set,c=null!=s?s:new Map,i=null!=r?r:Object.keys(t).find(e=>!c.has(e));if(!i)return u({},Array.from(c.entries()).reduce((e,[t,r])=>u(u({},e),{},{[t]:r}),{}));if(console.log("Resolving "+i),a.has(i))throw new Error("Recursive expansion in param set at "+i);a.add(i);let o=t[i];const l=/\{ *([A-Z0-9_]+) *\}/g;let p;const b=[];for(;null!==(p=l.exec(o));){var d;const r=p[1];c.has(r)||e(t,r,a,c),b.push([p.index,l.lastIndex,null!=(d=c.get(r))?d:"__RESOLUTION_FAILED__"])}b.reverse();for(const[e,t,r]of b)o=o.substr(0,e)+r+o.substr(t);return a.delete(i),c.set(i,o),console.log("Current stash",c),e(t,void 0,a,c)}(u(u({},e.shared),r))}r.r(t);var p=r("hosL"),b=r("y3o+"),d=r("++6B"),h=r.n(d),O=r("QRet");var m=({step:e,params:t,number:r})=>{if(console.log(e),"append"in e||"replace"in e){var s;const a=n(e.with,t);return Object(p.h)("div",{class:"mr-step mr-step-"+("append"in e?"append":"replace")},Object(p.h)("div",{class:"mr-step-header"},r,Object(p.h)("div",{class:"mr-step-op"},"append"in e?"Append to file":"Replace file")),Object(p.h)("div",{class:"mr-step-path"},null!=(s=e.replace)?s:e.append),Object(p.h)("pre",{class:"mr-step-file"},a))}if("run"in e){const s=n(e.run,t);return Object(p.h)("div",{class:"mr-step mr-step-run"},Object(p.h)("div",{class:"mr-step-header"},r,Object(p.h)("div",{class:"mr-step-op"},"Run script")),e.with&&Object(p.h)("div",{class:"mr-step-executor"},e.with),Object(p.h)("pre",{class:"mr-step-script"},s))}if("manually"in e){const s=n(e.manually,t);return Object(p.h)("div",{class:"mr-step mr-step-run"},Object(p.h)("div",{class:"mr-step-header"},r,Object(p.h)("div",{class:"mr-step-op"},"Manually do")),Object(p.h)("pre",{class:"mr-step-manually"},s))}return null};var f=({recipe:e,params:t})=>{const[r,n]=Object(O.d)({}),s=Object(O.b)(()=>{const n=Object.keys(e.params).map(t=>[t,e.params[t].default]).filter(e=>!!e[1]).reduce((e,[t,r])=>a(a({},e),{},{[t]:r}),{}),s=Object.keys(e.params).filter(t=>{let r=e.params[t]["possible-value"];return Array.isArray(r)&&1===r.length}).map(t=>[t,e.params[t]["possible-value"][0]]).reduce((e,[t,r])=>a(a({},e),{},{[t]:r}),{});return a(a(a(a({},n),s),r),t)},[r,e.params,t]),c=Object.keys(e.params).map(t=>{const n=e.params[t],a=n["possible-value"];let c=!1;if(s[t])if(Array.isArray(a))c=a.includes(s[t]);else if("string"==typeof a){const e=new RegExp(a);c=!!s[t].match(e)}else c=!0;else c=!!n.default;const i=Array.isArray(a)&&1===a.length;return{key:t,param:n,input:r[t],value:s[t],valid:c,fixed:i}}),i=c.filter(e=>!(e.key in t)&&!e.fixed),u=c.every(e=>e.valid),o=e.procedures.find(e=>{if(!e.when)return!0;for(const t in e.when)if(e.when[t]!==s[t])return!1;return!0});return Object(p.h)(p.Fragment,null,i.map(({key:e,param:t,input:r})=>{let s;const c=t["possible-value"];s=Array.isArray(c)?Object(p.h)("select",{value:r,class:"mr-param-select",onChange:t=>{n(r=>a(a({},r),{},{[e]:t.currentTarget.value}))}},Object(p.h)("option",{disabled:!0,default:!0,selected:!0},"Please select"),c.map(e=>Object(p.h)("option",{key:e,value:e},e))):Object(p.h)("input",{placeholder:t.default,value:r,class:"mr-param-input",onInput:t=>{const r=t.currentTarget.value;console.log(r),n(t=>{if(""!==r)return a(a({},t),{},{[e]:r});const n=a({},t);return delete n[e],n})}});let i=[];return t["obtained-by"]&&i.push(Object(p.h)("div",{class:"mr-hint"},"Try execute ",Object(p.h)("code",null,t["obtained-by"]))),"string"==typeof c&&i.push(Object(p.h)("div",{class:"mr-hint"},"Should match ",Object(p.h)("code",null,c))),Object(p.h)("div",{class:"mr-param"},Object(p.h)("div",{class:"mr-param-title"},e),Object(p.h)("div",{class:"mr-param-desc"},t.description),s,i)}),u&&Object(p.h)("div",{class:"mr-sep"}),u&&(o?o.steps.map(t=>t.do?e.steps[t.do]:t).map((e,t)=>Object(p.h)(m,{step:e,params:s,number:Object(p.h)("div",{class:"mr-step-number"},Object(p.h)("span",{class:"mr-step-number-hint"},"Step"),t+1,"/",o.steps.length)})):Object(p.h)("div",{class:"mr-failed"},"No applicable procedure found")))},v=r("83Vu"),j=r("n8fc"),y=r("Y3FI");t.default=({id:e})=>{var t;const r=b.b[e],{state:n}=Object(O.a)(v.a),s=n.site&&null!=(t=b.a[n.site])?t:null,a=s?l(s,e):{};return Object(p.h)(p.Fragment,null,Object(p.h)("div",{class:h.a.container},Object(p.h)("div",{class:h.a.breadcrumb},Object(p.h)(y.a,{href:"/"},"mirror-recipes"),Object(p.h)(y.a,{href:"/recipe"},"List")),Object(p.h)("div",{class:h.a["title-row"]},Object(p.h)("div",{class:h.a.title},e),Object(p.h)("div",{class:h.a.sep},"/"),Object(p.h)("div",{class:h.a.preset},Object(p.h)("div",{class:h.a.hint},"Preset"),Object(p.h)(j.a,null))),Object(p.h)(f,{recipe:r,params:a})))}},"y3o+":function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t,r;return null!=(t=null==(r=e.match(/\/(.*).ya?ml$/))?void 0:r[1])?t:""}r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return l}));const i=r("zBN9"),u=r("Mauj"),o=i.keys().reduce((e,t)=>s(s({},e),{},{[c(t)]:i(t)}),{}),l=u.keys().reduce((e,t)=>s(s({},e),{},{[c(t)]:u(t)}),{})},yFXU:function(e){e.exports=JSON.parse('{"params":{"DIST":{"possible-value":["archlinux"]},"BASE":{"description":"The base of the mirror"}},"procedures":[{"when":{"DIST":"archlinux"},"steps":[{"replace":"/etc/pacman.d/mirrorlist","with":"Server = {BASE}/$repo/os/$arch"},{"run":"pacman -Syy"}]}]}')},zBN9:function(e,t,r){function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}var a={"./AUR.yml":"bbHE","./archlinux.yaml":"yFXU","./ubuntu.yaml":"hFeo"};n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="zBN9"}}]);
//# sourceMappingURL=route-Recipe.chunk.e03c8.esm.js.map