{"version":3,"sources":["webpack:///./routes/List.tsx","webpack:///./routes/List.scss","webpack:///./assets/presets sync nonrecursive .ya","webpack:///../node_modules/clsx/dist/clsx.m.js","webpack:///./components/PresetSelect.scss","webpack:///./components/PresetSelect.tsx","webpack:///./assets/data.ts","webpack:///./assets/recipes sync nonrecursive .ya"],"names":["List","state","useContext","Ctx","sorted","useMemo","preset","site","PRESETS","entries","Object","keys","RECIPES","map","key","applicable","presets","sort","a","b","localeCompare","filter","e","length","shown","setShown","useState","class","style","container","breadcrumb","href","title","sep","hint","counter","warning","onClick","recipe","clsx","entry","procedures","params","module","exports","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","resolve","toVal","mix","k","y","str","Array","isArray","tmp","x","i","arguments","PresetSelect","dispatch","select","value","onChange","type","currentTarget","getName","fn","match","recipesCtx","require","presetsCtx","reduce","acc","cur"],"mappings":"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","file":"route-List.chunk.7d92b.esm.js","sourcesContent":["import { FunctionalComponent, h, Fragment } from \"preact\";\nimport { Ctx } from '../components/App';\nimport style from './List.scss';\nimport clsx from 'clsx';\nimport { useContext, useMemo, useState } from \"preact/hooks\";\nimport { PRESETS, RECIPES } from '../assets/data';\nimport { Link } from \"preact-router\";\nimport PresetSelect from \"../components/PresetSelect\";\n\nconst List: FunctionalComponent = () => {\n  const { state } = useContext(Ctx);\n\n  const sorted = useMemo(() => {\n    const preset = state.site ? (PRESETS[state.site] ?? null) : null;\n    const entries = Object.keys(RECIPES).map(key => ({\n      key,\n      applicable: preset ? !!preset.presets[key] : true,\n    }));\n    entries.sort((a, b) => a.key.localeCompare(b.key));\n    return entries;\n  }, [state.site]);\n\n  const applicable = sorted.filter(e => e.applicable).length;\n\n  const [shown, setShown] = useState(false);\n\n  return (\n    <Fragment>\n      <div class={style.container}>\n        <div class={style.breadcrumb}>\n          <Link href=\"/\">mirror-recipes</Link>\n        </div>\n\n        <div class={style[\"title-row\"]}>\n          <div class={style.title}>List</div>\n          <div class={style.sep}>/</div>\n          <div class={style.preset}>\n            <div class={style.hint}>Preset</div>\n            <PresetSelect />\n          </div>\n\n          <div class={style.counter}>\n            <div class={style.hint}>Count</div>\n            {state.site === null\n              ? Object.keys(RECIPES).length + \" recipies\"\n              : `${applicable}/${Object.keys(RECIPES).length}  applicable`}\n          </div>\n        </div>\n      </div>\n\n      <div class={style.container}>\n        {state.site !== null && (\n          <div class={style.warning}>\n            Some recipes may not be applicable to this preset. Click{\" \"}\n            <a onClick={() => setShown(!shown)}>here</a> to{\" \"}\n            {shown ? \"hide\" : \"show\"} them.\n          </div>\n        )}\n\n        {sorted.map(({ key, applicable }) => {\n          if(!applicable && !shown) return null;\n          const recipe = RECIPES[key];\n\n          return (\n            <Link href={`/recipe/${key}`} class={clsx(style.entry, {\n              [style['non-applicable']]: !applicable\n            })}>\n              <div class={style[\"entry-title\"]}>{key}</div>\n              <div class={style[\"entry-desc\"]}>\n                {recipe.procedures.length} procedures / {Object.keys(recipe.params).length} params\n              </div>\n            </Link>\n          );\n        })}\n      </div>\n    </Fragment>\n  );\n};\n\nexport default List;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container__2hjHJ\",\"title\":\"title__ppfmn\",\"title-row\":\"title-row__1fioq\",\"sep\":\"sep__ddU2a\",\"hint\":\"hint__3EiYj\",\"breadcrumb\":\"breadcrumb__3fOXX\",\"preset\":\"preset__nfoKa\",\"warning\":\"warning__1ykwW\",\"counter\":\"counter__6p-pJ\",\"entry\":\"entry__cqeQh\",\"entry-title\":\"entry-title__8Xwjn\",\"entry-desc\":\"entry-desc__3_CD1\",\"non-applicable\":\"non-applicable__2INTq\"};","var map = {\n\t\"./TUNA.yaml\": \"Ta76\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"Mauj\";","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"select__1gF0M\"};","import { FunctionalComponent, h, Fragment } from \"preact\";\nimport { useContext } from \"preact/hooks\";\nimport { Ctx } from './App';\nimport { PRESETS } from \"../assets/data\";\nimport style from './PresetSelect.scss';\n\nconst PresetSelect: FunctionalComponent = () => {\n  const { state, dispatch } = useContext(Ctx);\n\n  return (\n    <select\n      class={style.select}\n      value={state.site ?? \"__unset__\"}\n      onChange={(e) =>\n        dispatch({\n          type: \"SetSite\",\n          site:\n            e.currentTarget.value === \"__unset__\"\n              ? null\n              : e.currentTarget.value,\n        })\n      }\n    >\n      <option value=\"__unset__\">Unset</option>\n      <optgroup>\n        {Object.keys(PRESETS).map((k) => (\n          <option value={k} key={k}>\n            {k}\n          </option>\n        ))}\n      </optgroup>\n    </select>\n  )\n};\n\nexport default PresetSelect;","const recipesCtx = require.context('./recipes', false, /.ya?ml$/);\nconst presetsCtx = require.context('./presets', false, /.ya?ml$/);\n\nfunction getName(fn: string): string {\n  return fn.match(/\\/(.*).ya?ml$/)?.[1] ?? '';\n}\n\nexport const RECIPES: Record<string, Record<string, any>> = recipesCtx\n  .keys()\n  .reduce((acc, cur) => ({ ...acc, [getName(cur)]: recipesCtx(cur) }), {});\n\nexport const PRESETS: Record<string, Record<string, any>> = presetsCtx\n  .keys()\n  .reduce((acc, cur) => ({ ...acc, [getName(cur)]: presetsCtx(cur) }), {});\n","var map = {\n\t\"./ubuntu.yaml\": \"hFeo\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"zBN9\";"],"sourceRoot":""}