(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"++6B":function(e){e.exports={container:"container__1bdtp",title:"title__3q31p","title-row":"title-row__395Ks",sep:"sep__zj3cc",hint:"hint__2xB8n",breadcrumb:"breadcrumb__2SMJD",preset:"preset__1iX0X"}},Mauj:function(e,r,t){function n(e){var r=s(e);return t(r)}function s(e){if(!t.o(a,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return a[e]}var a={"./TUNA.yaml":"Ta76"};n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="Mauj"},Ta76:function(e){e.exports=JSON.parse('{"homepage":"https://mirrors.tuna.tsinghua.edu.cn","fullname":"Tsinghua University Open Source Mirrors","shared":{"SITE_BASE":"https://mirrors.tuna.tsinghua.edu.cn"},"presets":{"ubuntu":{"BASE":"{SITE_BASE}/ubuntu"}}}')},hFeo:function(e){e.exports=JSON.parse('{"params":{"DIST":{"possible-value":["ubuntu"]},"RELEASE":{"description":"The formal release name of the ubuntu version","possible-value":["focal","bionic","xenial"],"obtained-by":"cat /etc/apt/sources.list | awk \'{ print $3 }\' | grep -v - | head -n 1"},"BASE":{"description":"The base of the mirror","default":"https://mirrors.tuna.tsinghua.edu.cn/ubuntu"}},"steps":{"change-sources-list":{"replace":"/etc/apt/sources.list","with":"deb {BASE} {RELEASE} main restricted universe multiverse\\ndeb {BASE} {RELEASE}-security main restricted universe multiverse\\ndeb {BASE} {RELEASE}-backports main restricted universe multiverse\\ndeb {BASE} {RELEASE}-updates main restricted universe multiverse\\n# Enable if you want to get proposed packages\\n# deb {BASE} {RELEASE}-proposed main restricted universe multiverse\\n\\ndeb-src {BASE} {RELEASE} main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-security main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-backports main restricted universe multiverse\\ndeb-src {BASE} {RELEASE}-updates main restricted universe multiverse\\n# Enable if you want to get proposed packages\\n# deb-src {BASE} {RELEASE}-proposed main restricted universe multiverse\\n"}},"procedures":[{"when":{"DIST":"ubuntu"},"steps":[{"do":"change-sources-list"},{"run":"sudo apt update"}]}]}')},jh0i:function(e){e.exports={select:"select__1gF0M"}},n8fc:function(e,r,t){"use strict";var n=t("hosL"),s=t("QRet"),a=t("83Vu"),c=t("y3o+"),i=t("jh0i"),u=t.n(i);r.a=function(){var e,r=Object(s.a)(a.a),t=r.state,i=r.dispatch;return Object(n.f)("select",{class:u.a.select,value:null!=(e=t.site)?e:"__unset__",onChange:function(e){return i({type:"SetSite",site:"__unset__"===e.currentTarget.value?null:e.currentTarget.value})}},Object(n.f)("option",{value:"__unset__"},"Unset"),Object(n.f)("optgroup",null,Object.keys(c.a).map((function(e){return Object(n.f)("option",{value:e,key:e},e)}))))}},wIqj:function(e,r,t){"use strict";function n(e,r){for(var t,n=e,s=/\{ *([A-Z0-9_]+) *\}/g,a=[];null!==(t=s.exec(n));){var c,i=t[1];a.push([t.index,s.lastIndex,null!=(c=r[i])?c:"["+i+"]"])}a.reverse();for(var u=0,o=a;u<o.length;u++){var l=o[u],p=l[1],f=l[2];n=n.substr(0,l[0])+f+n.substr(p)}return n}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e,r){var t=e.presets[r];return t?function e(r,t,n,s){if(0===Object.keys(r).length)return{};var a=null!=n?n:new Set,c=null!=s?s:new Map,i=null!=t?t:Object.keys(r).find((function(e){return!c.has(e)}));if(!i)return u({},Array.from(c.entries()).reduce((function(e,r){var t,n=r[0],s=r[1];return u(u({},e),{},((t={})[n]=s,t))}),{}));if(console.log("Resolving "+i),a.has(i))throw new Error("Recursive expansion in param set at "+i);a.add(i);var o,l=r[i],p=/\{ *([A-Z0-9_]+) *\}/g,f=[];for(;null!==(o=p.exec(l));){var b,d=o[1];c.has(d)||e(r,d,a,c),f.push([o.index,p.lastIndex,null!=(b=c.get(d))?b:"__RESOLUTION_FAILED__"])}f.reverse();for(var v=0,O=f;v<O.length;v++){var m=O[v],j=m[1],y=m[2];l=l.substr(0,m[0])+y+l.substr(j)}return a.delete(i),c.set(i,l),console.log("Current stash",c),e(r,void 0,a,c)}(u(u({},e.shared),t)):{}}t.r(r);var p=t("hosL"),f=t("y3o+"),b=t("++6B"),d=t.n(b),v=t("QRet"),O=function(e){var r=e.step,t=e.params,s=e.number;if(console.log(r),"append"in r||"replace"in r){var a,c=n(r.with,t);return Object(p.f)("div",{class:"mr-step mr-step-"+("append"in r?"append":"replace")},Object(p.f)("div",{class:"mr-step-header"},s,Object(p.f)("div",{class:"mr-step-op"},"append"in r?"Append to file":"Replace file")),Object(p.f)("div",{class:"mr-step-path"},null!=(a=r.replace)?a:r.append),Object(p.f)("pre",{class:"mr-step-file"},c))}if("run"in r){var i=n(r.run,t);return Object(p.f)("div",{class:"mr-step mr-step-run"},Object(p.f)("div",{class:"mr-step-header"},s,Object(p.f)("div",{class:"mr-step-op"},"Run script")),r.with&&Object(p.f)("div",{class:"mr-step-executor"},r.with),Object(p.f)("pre",{class:"mr-step-script"},i))}if("manually"in r){var u=n(r.manually,t);return Object(p.f)("div",{class:"mr-step mr-step-run"},Object(p.f)("div",{class:"mr-step-header"},s,Object(p.f)("div",{class:"mr-step-op"},"Manually do")),Object(p.f)("pre",{class:"mr-step-manually"},u))}return null},m=function(e){var r=e.recipe,t=e.params,n=Object(v.d)({}),s=n[0],c=n[1],i=Object(v.b)((function(){var e=Object.keys(r.params).map((function(e){return[e,r.params[e].default]})).filter((function(e){return!!e[1]})).reduce((function(e,r){var t,n=r[0],s=r[1];return a(a({},e),{},((t={})[n]=s,t))}),{}),n=Object.keys(r.params).filter((function(e){var t=r.params[e]["possible-value"];return Array.isArray(t)&&1===t.length})).map((function(e){return[e,r.params[e]["possible-value"][0]]})).reduce((function(e,r){var t,n=r[0],s=r[1];return a(a({},e),{},((t={})[n]=s,t))}),{});return a(a(a(a({},e),n),s),t)}),[s,r.params,t]),u=Object.keys(r.params).map((function(e){var t=r.params[e],n=t["possible-value"],a=!1;if(i[e])if(Array.isArray(n))a=n.includes(i[e]);else if("string"==typeof n){var c=new RegExp(n);a=!!i[e].match(c)}else a=!0;else a=!!t.default;var u=Array.isArray(n)&&1===n.length;return{key:e,param:t,input:s[e],value:i[e],valid:a,fixed:u}})),o=u.filter((function(e){return!(e.key in t)&&!e.fixed})),l=u.every((function(e){return e.valid})),f=r.procedures.find((function(e){if(!e.when)return!0;for(var r in e.when)if(e.when[r]!==i[r])return!1;return!0}));return Object(p.f)(p.b,null,o.map((function(e){var r,t=e.key,n=e.param,s=e.input,i=n["possible-value"];r=Array.isArray(i)?Object(p.f)("select",{value:s,class:"mr-param-select",onChange:function(e){c((function(r){var n;return a(a({},r),{},((n={})[t]=e.currentTarget.value,n))}))}},Object(p.f)("option",{disabled:!0,default:!0,selected:!0},"Please select"),i.map((function(e){return Object(p.f)("option",{key:e,value:e},e)}))):Object(p.f)("input",{placeholder:n.default,value:s,class:"mr-param-input",onInput:function(e){var r=e.currentTarget.value;console.log(r),c((function(e){var n;if(""!==r)return a(a({},e),{},((n={})[t]=r,n));var s=a({},e);return delete s[t],s}))}});var u=[];return n["obtained-by"]&&u.push(Object(p.f)("div",{class:"mr-hint"},"Try execute ",Object(p.f)("code",null,n["obtained-by"]))),"string"==typeof i&&u.push(Object(p.f)("div",{class:"mr-hint"},"Should match ",Object(p.f)("code",null,i))),Object(p.f)("div",{class:"mr-param"},Object(p.f)("div",{class:"mr-param-title"},t),Object(p.f)("div",{class:"mr-param-desc"},n.description),r,u)})),l&&Object(p.f)("div",{class:"mr-sep"}),l&&(f?f.steps.map((function(e){return e.do?r.steps[e.do]:e})).map((function(e,r){return Object(p.f)(O,{step:e,params:i,number:Object(p.f)("div",{class:"mr-step-number"},Object(p.f)("span",{class:"mr-step-number-hint"},"Step"),r+1,"/",f.steps.length)})})):Object(p.f)("div",{class:"mr-failed"},"No applicable procedure found")))},j=t("83Vu"),y=t("n8fc"),h=t("Y3FI");r.default=function(e){var r,t=e.id,n=f.b[t],s=Object(v.a)(j.a),a=s.state,c=a.site&&null!=(r=f.a[a.site])?r:null,i=c?l(c,t):{};return Object(p.f)(p.b,null,Object(p.f)("div",{class:d.a.container},Object(p.f)("div",{class:d.a.breadcrumb},Object(p.f)(h.a,{href:"/"},"mirror-recipes"),Object(p.f)(h.a,{href:"/recipe"},"List")),Object(p.f)("div",{class:d.a["title-row"]},Object(p.f)("div",{class:d.a.title},t),Object(p.f)("div",{class:d.a.sep},"/"),Object(p.f)("div",{class:d.a.preset},Object(p.f)("div",{class:d.a.hint},"Preset"),Object(p.f)(y.a,null))),Object(p.f)(m,{recipe:n,params:i})))}},"y3o+":function(e,r,t){"use strict";function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){var r,t;return null!=(r=null==(t=e.match(/\/(.*).ya?ml$/))?void 0:t[1])?r:""}t.d(r,"b",(function(){return o})),t.d(r,"a",(function(){return l}));var i=t("zBN9"),u=t("Mauj"),o=i.keys().reduce((function(e,r){var t;return s(s({},e),{},((t={})[c(r)]=i(r),t))}),{}),l=u.keys().reduce((function(e,r){var t;return s(s({},e),{},((t={})[c(r)]=u(r),t))}),{})},zBN9:function(e,r,t){function n(e){var r=s(e);return t(r)}function s(e){if(!t.o(a,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return a[e]}var a={"./ubuntu.yaml":"hFeo"};n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="zBN9"}}]);
//# sourceMappingURL=route-Recipe.chunk.45eb4.js.map